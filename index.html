import React, { useState } from 'react';
import { Calendar, ShoppingCart, Clock, DollarSign, MapPin } from 'lucide-react';

const OctoberMealPlanner = () => {
  const [selectedDay, setSelectedDay] = useState(null);
  const [completedMeals, setCompletedMeals] = useState(new Set());
  const [shoppingCompleted, setShoppingCompleted] = useState(new Set());
  const [showRecipe, setShowRecipe] = useState(null);
  const [showGroceryList, setShowGroceryList] = useState(null);

  const totalBudget = 700;

  const mealPlan = {
    1: { meal: "Sous Vide Salmon with Greek Herbs", time: 45, cuisine: "Greek", cost: 28, store: "Publix", away: false },
    2: { meal: "Quick Italian Chicken Pasta", time: 30, cuisine: "Italian", cost: 18, store: "Trader Joe's", away: false },
    3: { meal: "Chinese Beef and Broccoli (Slow Cooker)", time: 25, cuisine: "Chinese", cost: 22, store: "Costco", away: false },
    4: { meal: "Weekend: Homemade Greek Moussaka", time: 120, cuisine: "Greek", cost: 35, store: "Publix", away: false },
    5: { meal: "Weekend: Mexican Chicken Fajitas", time: 90, cuisine: "Mexican", cost: 24, store: "Trader Joe's", away: false },
    6: { meal: "Seafood Paella (Instant Pot)", time: 40, cuisine: "Spanish", cost: 32, store: "Publix", away: false },
    7: { meal: "Italian Sausage and Peppers", time: 35, cuisine: "Italian", cost: 20, store: "Costco", away: false },
    8: { meal: "Chinese Orange Chicken", time: 40, cuisine: "Chinese", cost: 16, store: "Trader Joe's", away: false },
    9: { meal: "Greek Lemon Herb Chicken (Sous Vide)", time: 50, cuisine: "Greek", cost: 25, store: "Publix", away: false },
    10: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    11: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    12: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    13: { meal: "Wife Solo: Easy Pasta Marinara", time: 20, cuisine: "Italian", cost: 8, store: "Pantry", away: "partial" },
    14: { meal: "Wife Solo: Greek Salad with Chicken", time: 15, cuisine: "Greek", cost: 12, store: "Publix", away: "partial" },
    15: { meal: "Wife Solo: Chinese Takeout Style Rice Bowl", time: 25, cuisine: "Chinese", cost: 10, store: "Trader Joe's", away: "partial" },
    16: { meal: "Wife Solo: Quick Seafood Pasta", time: 30, cuisine: "Italian", cost: 18, store: "Publix", away: "partial" },
    17: { meal: "Mexican Chicken Enchiladas", time: 45, cuisine: "Mexican", cost: 26, store: "Costco", away: false },
    18: { meal: "Weekend: Italian Osso Buco (Slow Cooker)", time: 180, cuisine: "Italian", cost: 42, store: "Publix", away: false },
    19: { meal: "Weekend: Chinese Hot Pot", time: 75, cuisine: "Chinese", cost: 38, store: "Costco", away: false },
    20: { meal: "Greek Lamb Souvlaki", time: 35, cuisine: "Greek", cost: 30, store: "Publix", away: false },
    21: { meal: "Seafood Cioppino", time: 50, cuisine: "Italian", cost: 34, store: "Trader Joe's", away: false },
    22: { meal: "Mexican Carnitas (Instant Pot)", time: 40, cuisine: "Mexican", cost: 22, store: "Costco", away: false },
    23: { meal: "Chinese Honey Garlic Shrimp", time: 25, cuisine: "Chinese", cost: 24, store: "Publix", away: false },
    24: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    25: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    26: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    27: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    28: { meal: "Away - Trip Together", time: 0, cuisine: "Travel", cost: 0, store: "", away: true },
    29: { meal: "Italian Chicken Parmigiana", time: 55, cuisine: "Italian", cost: 28, store: "Publix", away: false },
    30: { meal: "Greek Stuffed Peppers", time: 40, cuisine: "Greek", cost: 20, store: "Trader Joe's", away: false },
    31: { meal: "Wine Night Prep Day - Light Dinner", time: 15, cuisine: "Light", cost: 15, store: "Pantry", away: false, special: "Wine Night Prep" }
  };

  const recipes = {
    1: {
      name: "Sous Vide Salmon with Greek Herbs",
      servings: 4,
      prepTime: 15,
      cookTime: 45,
      instructions: [
        "Set sous vide to 125°F for medium-rare salmon",
        "Mix olive oil, lemon juice, oregano, garlic, salt and pepper",
        "Season salmon fillets and vacuum seal with herb mixture",
        "Cook in sous vide for 45 minutes",
        "Sear in hot pan for 1 minute per side before serving",
        "Serve with roasted vegetables and lemon wedges"
      ],
      ingredients: [
        "4 salmon fillets (6oz each)",
        "1/4 cup olive oil",
        "2 lemons (juiced)",
        "2 tbsp fresh oregano",
        "3 cloves garlic (minced)",
        "Salt and pepper to taste",
        "Mixed vegetables for roasting"
      ]
    },
    2: {
      name: "Quick Italian Chicken Pasta",
      servings: 4,
      prepTime: 10,
      cookTime: 20,
      instructions: [
        "Cook pasta according to package directions",
        "Season chicken breast and cut into bite-sized pieces",
        "Heat olive oil in large pan, cook chicken until golden",
        "Add garlic, cook 1 minute",
        "Add diced tomatoes, Italian seasoning, and basil",
        "Simmer 5 minutes, add cooked pasta and parmesan",
        "Toss everything together and serve hot"
      ],
      ingredients: [
        "1 lb pasta (penne or rigatoni)",
        "2 chicken breasts",
        "1 can diced tomatoes",
        "3 cloves garlic",
        "1/4 cup olive oil",
        "1 tsp Italian seasoning",
        "Fresh basil leaves",
        "1/2 cup parmesan cheese"
      ]
    },
    3: {
      name: "Chinese Beef and Broccoli (Slow Cooker)",
      servings: 4,
      prepTime: 15,
      cookTime: 25,
      instructions: [
        "Cut beef into thin strips and season with salt and pepper",
        "Add beef to slow cooker with soy sauce, garlic, and ginger",
        "Cook on low for 6 hours or high for 3 hours",
        "In last 30 minutes, add broccoli florets",
        "Mix cornstarch with water to make slurry",
        "Stir cornstarch slurry into slow cooker to thicken sauce",
        "Serve over steamed rice with sesame seeds"
      ],
      ingredients: [
        "2 lbs beef sirloin (sliced thin)",
        "4 cups broccoli florets",
        "1/3 cup soy sauce",
        "4 cloves garlic (minced)",
        "2 tbsp fresh ginger (minced)",
        "2 tbsp cornstarch",
        "1/4 cup water",
        "2 tbsp sesame oil",
        "Steamed rice for serving"
      ]
    },
    4: {
      name: "Homemade Greek Moussaka",
      servings: 6,
      prepTime: 45,
      cookTime: 75,
      instructions: [
        "Slice eggplants and salt them, let drain 30 minutes",
        "Brown ground lamb with onions, garlic, and tomatoes",
        "Add wine, oregano, and cinnamon. Simmer 20 minutes",
        "Make bechamel: melt butter, add flour, slowly whisk in milk",
        "Add egg yolks and cheese to bechamel",
        "Layer: eggplant, meat sauce, eggplant, bechamel",
        "Bake at 350°F for 45 minutes until golden"
      ],
      ingredients: [
        "3 large eggplants",
        "2 lbs ground lamb",
        "2 onions (diced)",
        "4 cloves garlic",
        "1 can crushed tomatoes",
        "1/2 cup red wine",
        "2 tsp oregano",
        "1/2 tsp cinnamon",
        "4 tbsp butter",
        "4 tbsp flour",
        "2 cups milk",
        "3 egg yolks",
        "1 cup parmesan cheese"
      ]
    },
    5: {
      name: "Mexican Chicken Fajitas",
      servings: 4,
      prepTime: 20,
      cookTime: 25,
      instructions: [
        "Slice chicken breasts into strips and season with cumin, chili powder, salt and pepper",
        "Heat oil in large skillet over medium-high heat",
        "Cook chicken strips until golden and cooked through, about 6-8 minutes",
        "Remove chicken and set aside",
        "Add sliced bell peppers and onions to same pan",
        "Cook vegetables until slightly charred and tender, about 8-10 minutes",
        "Return chicken to pan and toss everything together",
        "Serve with warm tortillas, avocado, salsa, and cheese"
      ],
      ingredients: [
        "2 lbs chicken breasts",
        "3 bell peppers (mixed colors, sliced)",
        "2 large onions (sliced)",
        "2 tbsp olive oil",
        "1 tsp ground cumin",
        "1 tsp chili powder",
        "Salt and pepper to taste",
        "8 flour tortillas",
        "1 avocado (sliced)",
        "Salsa and shredded cheese for serving"
      ]
    },
    6: {
      name: "Seafood Paella (Instant Pot)",
      servings: 6,
      prepTime: 15,
      cookTime: 25,
      instructions: [
        "Set Instant Pot to sauté mode and heat olive oil",
        "Add onion and garlic, cook until fragrant",
        "Add rice and stir to coat with oil for 2 minutes",
        "Add saffron, paprika, and chicken broth",
        "Add shrimp, mussels, and calamari on top (don't stir)",
        "Close lid and cook on high pressure for 4 minutes",
        "Natural release for 10 minutes, then quick release",
        "Let stand 5 minutes, garnish with parsley and lemon"
      ],
      ingredients: [
        "2 cups Bomba or Arborio rice",
        "1 lb large shrimp (peeled)",
        "1 lb mussels (cleaned)",
        "1/2 lb calamari rings",
        "3 cups seafood or chicken stock",
        "1/4 cup olive oil",
        "1 onion (diced)",
        "4 cloves garlic (minced)",
        "1 tsp saffron threads",
        "1 tsp smoked paprika",
        "Fresh parsley and lemon wedges"
      ]
    },
    7: {
      name: "Italian Sausage and Peppers",
      servings: 4,
      prepTime: 10,
      cookTime: 25,
      instructions: [
        "Heat olive oil in large skillet over medium heat",
        "Add Italian sausages and brown on all sides",
        "Remove sausages and slice into 1-inch pieces",
        "Add bell peppers and onions to same pan",
        "Cook until vegetables start to soften, about 5 minutes",
        "Add garlic, oregano, and diced tomatoes",
        "Return sausage to pan and simmer 15 minutes",
        "Serve over pasta or with crusty bread"
      ],
      ingredients: [
        "2 lbs Italian sausages (sweet or hot)",
        "3 bell peppers (sliced)",
        "2 onions (sliced)",
        "4 cloves garlic (minced)",
        "1 can diced tomatoes",
        "2 tbsp olive oil",
        "1 tsp dried oregano",
        "Salt and pepper to taste",
        "Fresh basil for garnish"
      ]
    },
    8: {
      name: "Chinese Orange Chicken",
      servings: 4,
      prepTime: 20,
      cookTime: 20,
      instructions: [
        "Cut chicken into bite-sized pieces and season with salt and pepper",
        "Dredge chicken in flour, then dip in beaten eggs",
        "Heat oil in wok or large skillet over medium-high heat",
        "Fry chicken pieces until golden and cooked through, about 6-8 minutes",
        "Remove chicken and drain on paper towels",
        "In same pan, add orange juice, soy sauce, brown sugar, and ginger",
        "Simmer sauce until thickened, about 5 minutes",
        "Return chicken to pan, toss to coat, and serve over rice"
      ],
      ingredients: [
        "2 lbs chicken breast (cubed)",
        "1 cup flour",
        "2 eggs (beaten)",
        "1/4 cup vegetable oil",
        "1/2 cup fresh orange juice",
        "1/4 cup soy sauce",
        "1/4 cup brown sugar",
        "2 tbsp fresh ginger (minced)",
        "2 green onions (chopped)",
        "Sesame seeds for garnish"
      ]
    },
    9: {
      name: "Greek Lemon Herb Chicken (Sous Vide)",
      servings: 4,
      prepTime: 15,
      cookTime: 50,
      instructions: [
        "Set sous vide to 140°F for juicy chicken",
        "Mix olive oil, lemon juice, oregano, thyme, and garlic",
        "Season chicken thighs with salt and pepper",
        "Vacuum seal chicken with herb mixture",
        "Cook in sous vide for 1.5 hours",
        "Remove from bags and pat dry",
        "Sear skin-side down in hot pan for 3-4 minutes until crispy",
        "Serve with Greek potatoes and tzatziki"
      ],
      ingredients: [
        "8 chicken thighs (bone-in, skin-on)",
        "1/4 cup olive oil",
        "2 lemons (juiced and zested)",
        "2 tbsp fresh oregano",
        "1 tbsp fresh thyme",
        "4 cloves garlic (minced)",
        "Salt and pepper to taste",
        "Greek potatoes for serving",
        "Tzatziki sauce"
      ]
    },
    13: {
      name: "Easy Pasta Marinara (Wife Solo)",
      servings: 2,
      prepTime: 5,
      cookTime: 15,
      instructions: [
        "Cook pasta according to package directions",
        "Heat marinara sauce in saucepan",
        "Add Italian seasoning and garlic powder",
        "Drain pasta and toss with sauce",
        "Top with parmesan cheese and fresh basil",
        "Serve with side salad"
      ],
      ingredients: [
        "8 oz pasta",
        "2 cups marinara sauce",
        "1 tsp Italian seasoning",
        "1/2 tsp garlic powder",
        "1/4 cup parmesan cheese",
        "Fresh basil leaves"
      ]
    },
    14: {
      name: "Greek Salad with Chicken (Wife Solo)",
      servings: 2,
      prepTime: 10,
      cookTime: 5,
      instructions: [
        "Chop tomatoes, cucumbers, red onion, and bell pepper",
        "Add olives and feta cheese to vegetables",
        "Make dressing with olive oil, lemon juice, oregano",
        "Season rotisserie chicken and slice",
        "Toss salad with dressing",
        "Top with sliced chicken and serve with pita"
      ],
      ingredients: [
        "4 cups mixed greens",
        "2 tomatoes (chopped)",
        "1 cucumber (sliced)",
        "1/2 red onion (sliced)",
        "1/2 cup kalamata olives",
        "4 oz feta cheese",
        "1/4 cup olive oil",
        "2 tbsp lemon juice",
        "1 tsp oregano",
        "1 rotisserie chicken breast"
      ]
    },
    15: {
      name: "Chinese Takeout Style Rice Bowl (Wife Solo)",
      servings: 2,
      prepTime: 15,
      cookTime: 10,
      instructions: [
        "Cook rice according to package directions",
        "Scramble eggs and set aside",
        "Heat oil in wok or large pan",
        "Add mixed vegetables and stir-fry 3-4 minutes",
        "Add cooked rice and break up any clumps",
        "Return eggs to pan and mix everything together",
        "Season with soy sauce and sesame oil"
      ],
      ingredients: [
        "2 cups cooked rice",
        "2 eggs (beaten)",
        "2 cups frozen mixed vegetables",
        "2 tbsp vegetable oil",
        "3 tbsp soy sauce",
        "1 tbsp sesame oil",
        "2 green onions (chopped)"
      ]
    },
    16: {
      name: "Quick Seafood Pasta (Wife Solo)",
      servings: 2,
      prepTime: 10,
      cookTime: 20,
      instructions: [
        "Cook pasta according to package directions",
        "Heat olive oil in large pan",
        "Add garlic and cook until fragrant",
        "Add shrimp and scallops, cook 3-4 minutes",
        "Add white wine and let reduce",
        "Toss with cooked pasta and fresh herbs",
        "Serve with lemon wedges"
      ],
      ingredients: [
        "8 oz linguine",
        "1/2 lb medium shrimp",
        "1/2 lb sea scallops",
        "1/4 cup olive oil",
        "4 cloves garlic (minced)",
        "1/4 cup white wine",
        "2 tbsp fresh parsley",
        "1 lemon (wedged)"
      ]
    },
    17: {
      name: "Mexican Chicken Enchiladas",
      servings: 6,
      prepTime: 30,
      cookTime: 25,
      instructions: [
        "Preheat oven to 375°F",
        "Cook and shred chicken breasts, season with cumin and chili powder",
        "Warm flour tortillas to make them pliable",
        "Mix shredded chicken with 1 cup cheese and diced onions",
        "Fill each tortilla with chicken mixture and roll tightly",
        "Place seam-side down in baking dish",
        "Pour enchilada sauce over top and sprinkle with remaining cheese",
        "Bake 25 minutes until cheese melts and sauce bubbles"
      ],
      ingredients: [
        "3 lbs chicken breasts (cooked and shredded)",
        "12 flour tortillas",
        "2 cups enchilada sauce",
        "3 cups Mexican cheese blend",
        "1 onion (diced)",
        "1 tsp ground cumin",
        "1 tsp chili powder",
        "Sour cream and cilantro for serving"
      ]
    },
    18: {
      name: "Italian Osso Buco (Slow Cooker)",
      servings: 6,
      prepTime: 30,
      cookTime: 180,
      instructions: [
        "Season veal shanks with salt and pepper, dredge in flour",
        "Heat oil in large skillet, brown veal shanks on all sides",
        "Transfer shanks to slow cooker",
        "In same skillet, sauté onions, carrots, and celery until soft",
        "Add garlic, wine, tomatoes, and herbs to vegetables",
        "Pour mixture over veal shanks in slow cooker",
        "Cook on low for 6-8 hours until meat is falling off the bone",
        "Serve with risotto Milanese and gremolata"
      ],
      ingredients: [
        "6 veal shanks (cross-cut)",
        "1/2 cup flour",
        "1/4 cup olive oil",
        "2 onions (diced)",
        "3 carrots (diced)",
        "3 celery stalks (diced)",
        "4 cloves garlic (minced)",
        "1 cup white wine",
        "1 can diced tomatoes",
        "2 bay leaves",
        "Fresh thyme and rosemary"
      ]
    },
    19: {
      name: "Chinese Hot Pot",
      servings: 6,
      prepTime: 30,
      cookTime: 45,
      instructions: [
        "Prepare broth: combine chicken stock, ginger, garlic, and soy sauce",
        "Bring broth to boil in large pot or hot pot setup",
        "Slice all proteins thinly for quick cooking",
        "Prepare vegetables: wash greens, slice mushrooms, cube tofu",
        "Arrange all ingredients on platters around the pot",
        "Each person cooks their own selection in the broth",
        "Serve with dipping sauces and steamed rice"
      ],
      ingredients: [
        "8 cups chicken stock",
        "2 inches fresh ginger (sliced)",
        "6 cloves garlic (smashed)",
        "1/4 cup soy sauce",
        "1 lb thinly sliced beef",
        "1 lb raw shrimp",
        "1 lb firm tofu (cubed)",
        "4 cups mixed mushrooms",
        "4 cups leafy greens",
        "Rice noodles",
        "Various dipping sauces"
      ]
    },
    20: {
      name: "Greek Lamb Souvlaki",
      servings: 4,
      prepTime: 20,
      cookTime: 15,
      instructions: [
        "Cut lamb into 1-inch cubes",
        "Marinate lamb with olive oil, lemon juice, oregano, and garlic for 30 minutes",
        "Thread lamb onto skewers alternating with red onion pieces",
        "Preheat grill or grill pan to medium-high heat",
        "Grill skewers 12-15 minutes, turning occasionally",
        "Make tzatziki: mix yogurt, cucumber, garlic, and dill",
        "Serve with warm pita bread, tzatziki, and Greek salad"
      ],
      ingredients: [
        "2 lbs leg of lamb (cubed)",
        "1/4 cup olive oil",
        "2 lemons (juiced)",
        "2 tbsp fresh oregano",
        "4 cloves garlic (minced)",
        "1 red onion (cut in chunks)",
        "1 cup Greek yogurt",
        "1 cucumber (grated and drained)",
        "2 tbsp fresh dill",
        "Pita bread for serving"
      ]
    },
    21: {
      name: "Seafood Cioppino",
      servings: 6,
      prepTime: 25,
      cookTime: 25,
      instructions: [
        "Heat olive oil in large Dutch oven over medium heat",
        "Sauté onion, bell pepper, and garlic until soft",
        "Add wine and let it reduce by half",
        "Add crushed tomatoes, fish stock, and herbs",
        "Simmer for 15 minutes to develop flavors",
        "Add firm fish first, cook 3 minutes",
        "Add shrimp, scallops, and mussels, cook 5 more minutes",
        "Serve in bowls with crusty sourdough bread"
      ],
      ingredients: [
        "1/4 cup olive oil",
        "1 onion (diced)",
        "1 bell pepper (diced)",
        "4 cloves garlic (minced)",
        "1 cup white wine",
        "1 can crushed tomatoes",
        "2 cups fish stock",
        "1 lb firm fish (halibut or cod)",
        "1 lb large shrimp",
        "1/2 lb sea scallops",
        "2 lbs mussels",
        "Fresh basil and parsley"
      ]
    },
    22: {
      name: "Mexican Carnitas (Instant Pot)",
      servings: 8,
      prepTime: 15,
      cookTime: 25,
      instructions: [
        "Season pork shoulder with salt, pepper, cumin, and chili powder",
        "Set Instant Pot to sauté mode and brown pork on all sides",
        "Add orange juice, lime juice, garlic, and bay leaves",
        "Cook on high pressure for 90 minutes with natural release",
        "Remove pork and shred with two forks",
        "Reduce cooking liquid on sauté mode until syrupy",
        "Toss shredded pork with reduced liquid",
        "Serve in tacos with onions, cilantro, and lime"
      ],
      ingredients: [
        "4 lbs pork shoulder (cut in chunks)",
        "2 tsp ground cumin",
        "1 tsp chili powder",
        "1 orange (juiced)",
        "2 limes (juiced)",
        "6 cloves garlic (smashed)",
        "2 bay leaves",
        "Salt and pepper to taste",
        "Flour tortillas, onions, cilantro for serving"
      ]
    },
    23: {
      name: "Chinese Honey Garlic Shrimp",
      servings: 4,
      prepTime: 15,
      cookTime: 10,
      instructions: [
        "Peel and devein shrimp, pat dry",
        "Make sauce: combine honey, soy sauce, garlic, and ginger",
        "Heat oil in large wok or skillet over high heat",
        "Add shrimp and cook 2-3 minutes until pink",
        "Add sauce to pan and toss to coat",
        "Cook 1-2 more minutes until sauce thickens",
        "Garnish with green onions and sesame seeds",
        "Serve over steamed rice with vegetables"
      ],
      ingredients: [
        "2 lbs large shrimp (peeled and deveined)",
        "1/3 cup honey",
        "1/4 cup soy sauce",
        "6 cloves garlic (minced)",
        "2 tbsp fresh ginger (minced)",
        "2 tbsp vegetable oil",
        "3 green onions (chopped)",
        "1 tbsp sesame seeds",
        "Steamed rice for serving"
      ]
    },
    29: {
      name: "Italian Chicken Parmigiana",
      servings: 4,
      prepTime: 25,
      cookTime: 30,
      instructions: [
        "Preheat oven to 425°F",
        "Pound chicken breasts to even thickness",
        "Set up breading station: flour, beaten eggs, breadcrumbs mixed with parmesan",
        "Bread chicken: flour, egg, breadcrumb mixture",
        "Heat oil in oven-safe skillet, brown chicken 3 minutes per side",
        "Top each piece with marinara sauce and mozzarella cheese",
        "Bake 20 minutes until cheese melts and chicken reaches 165°F",
        "Garnish with fresh basil and serve with pasta"
      ],
      ingredients: [
        "4 chicken breasts (pounded thin)",
        "1 cup flour",
        "3 eggs (beaten)",
        "2 cups panko breadcrumbs",
        "1 cup parmesan cheese (grated)",
        "2 cups marinara sauce",
        "2 cups mozzarella cheese (shredded)",
        "1/4 cup olive oil",
        "Fresh basil leaves",
        "Salt and pepper to taste"
      ]
    },
    30: {
      name: "Greek Stuffed Peppers",
      servings: 4,
      prepTime: 20,
      cookTime: 20,
      instructions: [
        "Cut tops off bell peppers and remove seeds and membranes",
        "Cook rice according to package directions with chicken broth",
        "Brown ground lamb with onions and garlic",
        "Mix cooked rice, lamb, diced tomatoes, pine nuts, and herbs",
        "Season filling with salt, pepper, and oregano",
        "Stuff peppers with rice mixture and top with feta cheese",
        "Bake at 375°F for 35-40 minutes until peppers are tender",
        "Drizzle with olive oil and serve with Greek salad"
      ],
      ingredients: [
        "4 large bell peppers (any color)",
        "1 cup rice",
        "2 cups chicken broth",
        "1 lb ground lamb",
        "1 onion (diced)",
        "3 cloves garlic (minced)",
        "1 can diced tomatoes",
        "1/4 cup pine nuts",
        "1/4 cup fresh dill",
        "1/2 cup crumbled feta cheese",
        "2 tbsp olive oil"
      ]
    },
    31: {
      name: "Wine Night Prep - Light Dinner",
      servings: 2,
      prepTime: 5,
      cookTime: 10,
      instructions: [
        "Keep it simple since you're preparing for Wine Night",
        "Make a light salad with mixed greens and vinaigrette",
        "Toast some bread with olive oil and garlic",
        "Prepare a small cheese and fruit plate",
        "Save energy for the evening's festivities",
        "Stay hydrated and eat lightly"
      ],
      ingredients: [
        "Mixed salad greens",
        "Simple vinaigrette",
        "Crusty bread",
        "Olive oil and garlic",
        "Small selection of cheese",
        "Fresh fruit",
        "Light appetite for tonight!"
      ]
    }
  };

  const groceryLists = {
    0: {
      title: "Sep 28-30: Costco & Publix - Week 1 Setup",
      costco: [
        "Salmon fillets (2 lbs pack)",
        "Ground lamb (3 lbs)",
        "Chicken breasts (family pack)",
        "Italian sausages (bulk pack)",
        "Pasta variety pack",
        "Olive oil (large bottle)",
        "Canned tomatoes (6-pack)",
        "Parmesan cheese (large wedge)"
      ],
      publix: [
        "Eggplants (3 large)",
        "Fresh herbs (oregano, basil, parsley)",
        "Lemons (bag of 8)",
        "Mixed vegetables for roasting",
        "Fresh garlic",
        "Yellow onions (3 lb bag)",
        "Eggs (18 count)",
        "Butter (2 lbs)",
        "Milk (1 gallon)"
      ],
      budget: 120
    },
    1: {
      title: "Oct 4-5: Trader Joe's - Specialty Items",
      items: [
        "Wine selection for cooking",
        "Specialty cheeses",
        "Organic chicken stock",
        "Artisanal pasta sauces",
        "Mediterranean olives",
        "Frozen seafood mix",
        "Trader Joe's spice blends",
        "Organic vegetables",
        "Greek yogurt variety"
      ],
      budget: 85
    },
    5: {
      title: "Oct 30-31: All Stores - Wine Night Spectacular",
      specialty: [
        "Artisanal cheeses (5+ varieties)",
        "Charcuterie meats",
        "Specialty crackers and breads",
        "Olives and pickled items",
        "Nuts and dried fruits",
        "Premium chocolates",
        "Fresh fruits for presentation",
        "Wine selection (6+ bottles)",
        "Appetizer ingredients",
        "Garnishes and herbs"
      ],
      budget: 200
    }
  };

  const shoppingTrips = [
    { date: "Sep 28-30", stores: ["Costco", "Publix"], items: "Bulk proteins, fresh produce for Week 1", budget: 120 },
    { date: "Oct 4-5", stores: ["Trader Joe's"], items: "Specialty items, wines, pantry restocks", budget: 85 },
    { date: "Oct 30-31", stores: ["All Stores"], items: "Wine Night specialty foods & ingredients", budget: 200 }
  ];

  const getDayColor = (day, meal) => {
    if (completedMeals.has(day)) return "bg-green-100 border-green-300";
    if (meal.away === true) return "bg-gray-100 border-gray-300";
    if (meal.away === "partial") return "bg-yellow-50 border-yellow-300";
    if (meal.special) return "bg-purple-50 border-purple-300";
    return "bg-white border-gray-200 hover:border-blue-300";
  };

  const getCuisineColor = (cuisine) => {
    const colors = {
      Italian: "bg-red-100 text-red-800",
      Chinese: "bg-yellow-100 text-yellow-800",
      Greek: "bg-blue-100 text-blue-800",
      Mexican: "bg-green-100 text-green-800",
      Spanish: "bg-orange-100 text-orange-800",
      Travel: "bg-gray-100 text-gray-600",
      Light: "bg-purple-100 text-purple-800"
    };
    return colors[cuisine] || "bg-gray-100 text-gray-800";
  };

  const toggleMealComplete = (day) => {
    const newCompleted = new Set(completedMeals);
    if (newCompleted.has(day)) {
      newCompleted.delete(day);
    } else {
      newCompleted.add(day);
    }
    setCompletedMeals(newCompleted);
  };

  const totalPlannedCost = Object.values(mealPlan).reduce((sum, meal) => sum + meal.cost, 0);
  const budgetProgress = (totalPlannedCost / totalBudget) * 100;

  return (
    <div className="max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen">
      <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h1 className="text-3xl font-bold text-center mb-4 text-gray-800">
          <Calendar className="inline mr-3" />
          October 2025 Meal Planner
        </h1>
        
        <div className="bg-blue-50 rounded-lg p-4 mb-6">
          <div className="flex justify-between items-center mb-2">
            <h3 className="font-semibold flex items-center">
              <DollarSign className="w-4 h-4 mr-2" />
              Monthly Budget: ${totalBudget}
            </h3>
            <span className="text-lg font-bold">
              Planned: ${totalPlannedCost} ({budgetProgress.toFixed(1)}%)
            </span>
          </div>
          <div className="w-full bg-gray-200 rounded-full h-3">
            <div 
              className="bg-blue-600 h-3 rounded-full" 
              style={{width: `${Math.min(budgetProgress, 100)}%`}}
            ></div>
          </div>
          <p className="text-sm text-gray-600 mt-2">
            Remaining: ${totalBudget - totalPlannedCost} | Wine Night Budget Included: $200
          </p>
        </div>

        <div className="grid grid-cols-7 gap-3 mb-8">
          {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
            <div key={day} className="font-semibold text-center text-gray-600 py-2">
              {day}
            </div>
          ))}
          
          {[...Array(2)].map((_, i) => (
            <div key={`empty-${i}`} className="h-24"></div>
          ))}
          
          {Object.entries(mealPlan).map(([day, meal]) => (
            <div
              key={day}
              className={`border-2 rounded-lg p-3 cursor-pointer transition-all ${getDayColor(parseInt(day), meal)}`}
              onClick={() => setSelectedDay(selectedDay === parseInt(day) ? null : parseInt(day))}
            >
              <div className="font-bold text-lg mb-1">{day}</div>
              <div className="text-xs">
                <span className={`px-2 py-1 rounded text-xs ${getCuisineColor(meal.cuisine)}`}>
                  {meal.cuisine}
                </span>
              </div>
              <div className="mt-1 text-xs font-medium truncate">{meal.meal}</div>
              {meal.time > 0 && (
                <div className="text-xs text-gray-500 flex items-center mt-1">
                  <Clock className="w-3 h-3 mr-1" />
                  {meal.time}min
                </div>
              )}
              {meal.cost > 0 && (
                <div className="text-xs text-green-600 font-semibold">${meal.cost}</div>
              )}
              {!meal.away && (
                <button
                  className={`w-full mt-2 px-2 py-1 rounded text-xs ${
                    completedMeals.has(parseInt(day)) 
                      ? 'bg-green-500 text-white' 
                      : 'bg-gray-200 hover:bg-gray-300'
                  }`}
                  onClick={(e) => {
                    e.stopPropagation();
                    toggleMealComplete(parseInt(day));
                  }}
                >
                  {completedMeals.has(parseInt(day)) ? 'Done ✓' : 'Mark Done'}
                </button>
              )}
            </div>
          ))}
        </div>

        {selectedDay && (
          <div className="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6 rounded-r-lg">
            <h3 className="text-xl font-bold mb-3">October {selectedDay} - {mealPlan[selectedDay].meal}</h3>
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <p><strong>Cuisine:</strong> {mealPlan[selectedDay].cuisine}</p>
                <p><strong>Cook Time:</strong> {mealPlan[selectedDay].time} minutes</p>
                <p><strong>Cost:</strong> ${mealPlan[selectedDay].cost}</p>
                {mealPlan[selectedDay].store && (
                  <p><strong>Shop at:</strong> {mealPlan[selectedDay].store}</p>
                )}
              </div>
              <div>
                {mealPlan[selectedDay].away === "partial" && (
                  <p className="text-orange-600"><strong>Note:</strong> Smaller portion - you're traveling</p>
                )}
                {mealPlan[selectedDay].special && (
                  <p className="text-purple-600"><strong>Special:</strong> {mealPlan[selectedDay].special}</p>
                )}
                {recipes[selectedDay] && (
                  <button
                    className="mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
                    onClick={() => setShowRecipe(selectedDay)}
                  >
                    View Full Recipe
                  </button>
                )}
              </div>
            </div>
          </div>
        )}

        <div className="bg-white border rounded-lg p-6">
          <h3 className="text-xl font-bold mb-4 flex items-center">
            <ShoppingCart className="mr-2" />
            Shopping Schedule
          </h3>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {shoppingTrips.map((trip, index) => (
              <div 
                key={index} 
                className={`border rounded-lg p-4 ${
                  shoppingCompleted.has(index) ? 'bg-green-50 border-green-300' : 'bg-gray-50'
                }`}
              >
                <h4 className="font-semibold">{trip.date}</h4>
                <div className="mb-2">
                  {trip.stores.map(store => (
                    <span key={store} className="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-1 mb-1">
                      <MapPin className="w-3 h-3 inline mr-1" />
                      {store}
                    </span>
                  ))}
                </div>
                <p className="text-sm text-gray-600 mb-2">{trip.items}</p>
                <p className="font-semibold text-green-600 mb-2">Budget: ${trip.budget}</p>
                <button
                  className="w-full bg-orange-500 text-white py-1 px-2 rounded text-sm hover:bg-orange-600"
                  onClick={() => setShowGroceryList(index)}
                >
                  View Grocery List
                </button>
              </div>
            ))}
          </div>
        </div>

        {showRecipe && recipes[showRecipe] && (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
            <div className="bg-white rounded-lg max-w-2xl w-full my-8 overflow-hidden"
                 style={{ maxHeight: 'calc(100vh - 4rem)' }}>
              <div className="p-6 overflow-y-auto" style={{ maxHeight: 'calc(100vh - 8rem)' }}>
                <div className="flex justify-between items-start mb-4">
                  <h2 className="text-2xl font-bold text-gray-800">{recipes[showRecipe].name}</h2>
                  <button
                    onClick={() => setShowRecipe(null)}
                    className="text-gray-500 hover:text-gray-700 text-2xl font-bold"
                  >
                    ×
                  </button>
                </div>
                
                <div className="grid md:grid-cols-3 gap-4 mb-6">
                  <div className="bg-blue-50 p-3 rounded">
                    <div className="font-semibold text-blue-800">Servings</div>
                    <div className="text-2xl font-bold text-blue-600">{recipes[showRecipe].servings}</div>
                  </div>
                  <div className="bg-green-50 p-3 rounded">
                    <div className="font-semibold text-green-800">Prep Time</div>
                    <div className="text-2xl font-bold text-green-600">{recipes[showRecipe].prepTime}min</div>
                  </div>
                  <div className="bg-orange-50 p-3 rounded">
                    <div className="font-semibold text-orange-800">Cook Time</div>
                    <div className="text-2xl font-bold text-orange-600">{recipes[showRecipe].cookTime}min</div>
                  </div>
                </div>

                <div className="grid md:grid-cols-2 gap-6">
                  <div>
                    <h3 className="text-xl font-semibold mb-3 text-gray-800">Ingredients</h3>
                    <ul className="space-y-2">
                      {recipes[showRecipe].ingredients.map((ingredient, index) => (
                        <li key={index} className="flex items-start">
                          <span className="w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                          <span>{ingredient}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                  
                  <div>
                    <h3 className="text-xl font-semibold mb-3 text-gray-800">Instructions</h3>
                    <ol className="space-y-3">
                      {recipes[showRecipe].instructions.map((instruction, index) => (
                        <li key={index} className="flex items-start">
                          <span className="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 flex-shrink-0 mt-0.5">
                            {index + 1}
                          </span>
                          <span>{instruction}</span>
                        </li>
                      ))}
                    </ol>
                  </div>
                </div>

                <div className="mt-6 flex justify-end">
                  <button
                    onClick={() => setShowRecipe(null)}
                    className="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700"
                  >
                    Close Recipe
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {showGroceryList !== null && groceryLists[showGroceryList] && (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
            <div className="bg-white rounded-lg max-w-2xl w-full my-8 overflow-hidden"
                 style={{ maxHeight: 'calc(100vh - 4rem)' }}>
              <div className="p-6 overflow-y-auto" style={{ maxHeight: 'calc(100vh - 8rem)' }}>
                <div className="flex justify-between items-start mb-4">
                  <h2 className="text-2xl font-bold text-gray-800">{groceryLists[showGroceryList].title}</h2>
                  <button
                    onClick={() => setShowGroceryList(null)}
                    className="text-gray-500 hover:text-gray-700 text-2xl font-bold"
                  >
                    ×
                  </button>
                </div>

                <div className="bg-green-50 p-4 rounded-lg mb-6">
                  <div className="font-semibold text-green-800">Total Budget</div>
                  <div className="text-3xl font-bold text-green-600">${groceryLists[showGroceryList].budget}</div>
                </div>

                {groceryLists[showGroceryList].costco && (
                  <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-red-600 flex items-center">
                      <MapPin className="w-5 h-5 mr-2" />
                      Costco
                    </h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                      {groceryLists[showGroceryList].costco.map((item, index) => (
                        <div key={index} className="flex items-center p-2 bg-red-50 rounded">
                          <input type="checkbox" className="mr-3" />
                          <span>{item}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {groceryLists[showGroceryList].publix && (
                  <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-green-600 flex items-center">
                      <MapPin className="w-5 h-5 mr-2" />
                      Publix
                    </h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                      {groceryLists[showGroceryList].publix.map((item, index) => (
                        <div key={index} className="flex items-center p-2 bg-green-50 rounded">
                          <input type="checkbox" className="mr-3" />
                          <span>{item}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {groceryLists[showGroceryList].items && (
                  <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-purple-600">Shopping List</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                      {groceryLists[showGroceryList].items.map((item, index) => (
                        <div key={index} className="flex items-center p-2 bg-purple-50 rounded">
                          <input type="checkbox" className="mr-3" />
                          <span>{item}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {groceryLists[showGroceryList].specialty && (
                  <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-purple-600">Wine Night Specialties</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                      {groceryLists[showGroceryList].specialty.map((item, index) => (
                        <div key={index} className="flex items-center p-2 bg-purple-50 rounded">
                          <input type="checkbox" className="mr-3" />
                          <span>{item}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <div className="mt-6 flex justify-end">
                  <button
                    onClick={() => setShowGroceryList(null)}
                    className="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700"
                  >
                    Close List
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default OctoberMealPlanner;
